let cached_rate = null

async function btc_usd_rate(from = 'btc', to = 'usd') {
  if (cached_rate) return cached_rate

  const rate = Number(await (await fetch(`https://api.price2sheet.com/raw/${from}/${to}`)).text())

  if (!isNaN(rate) && rate > 0) {
    cached_rate = rate
    console.log("api is working")
  } else {
    console.log("api is returning null value")
  }

  return cached_rate
}

module.exports = btc_usd_rate